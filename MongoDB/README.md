# MongoDB

몽고DB는 NoSQL의 일종으로, 자바스크립트의 문법을 사용한다.
특히 몽고DB는 다음과 같은 특징이 있다.

- 용어: 컬렉션(테이블), 다큐멘트(로우), 필드(컬럼)

  - 일반적인 SQL과 다르게 컬럼을 따로 정의하지 않는다.
  - 따라서 같은 컬렉션 안의 다큐멘트에서도 다른 필드 형태가 나타날 수 있다.
    > doc 컬렉션 안에 title, updatedAt로 이루어진 다큐멘트와, title, contents, location으로 이루어진 다큐멘트가 있을 수 있다는 뜻

- 트랜잭션을 지원하지 않는다.

  - 트랜잭션은 여러 쿼리가 모두 정상적으로 수행되거나, 아예 수행되지 않는 것을 보장하는 기능이다. 즉, 데이터의 일관성에 문제가 생길 수 있다. (1) A에서 삭제하고 (2) B에 옮기는 작업을 한다고 하면, (1)은 수행되고 (2)에서 에러가 생겼을 때 의도한 것처럼 수행되지 않을 것이다.

    > 몽고DB 4부터는 지원한다고 발표했다.

- 컬렉션 간 JOIN을 지원하지 않는다. (관계형 DB가 아님)

  - SQL과 달리 JOIN 기능이 없다. JOIN처럼 보이게 만들 수는 있는데 하나의 쿼리로 여러 테이블을 합치는 작업이 항상 가능한 것은 아니다.

- 데이터 입력이 자유롭다.
  - 데이터를 정의하지 않는다는 점에서 가능한 얘기여서 어떻게 보면 일관성이 떨어진다는 얘기이다.

위 특징에서 보이는 대로라면, 데이터의 안전성, 일관성 보장이 약한 DB지만, 그럼에도 사용되는 이유는 빠른 데이터 처리, 쉽게 여러 서버에 데이터를 분산하는 능력 때문이다.

## 사용하기

윈도우에서는 잘 모르겠다만 사용할 때 `mongod` 명령어를 통해서 몽고DB를 켤 수 있다. 그 이후 `mongo` 명령어를 사용하면 몽고DB의 localhost 서버로 접근할 수 있다. `mongod`로 서버를 켜지 않으면 `Connection refused`가 나온다.

- 데이터베이스를 만드는 명령어는 `use [데이터베이스]`이다. 없으면 만들어지고 사용 중인 db로 바뀌고, 있으면 스위치된다. `db`를 치면 사용중인 db가 나옴
- 데이터베이스 목록은 `show dbs`이다.
- 컬렉션은 따로 만들 필요 없고, 다큐멘트를 넣으면 자동 생성된다. `db.createCollection('컬렉션이름')`으로 만들 수는 있다. 생성된 컬렉션 목록은 `show collections`로 확인할 수 있다.

## [CRUD](./crud.md)

## [Mongoose](./mongoose.md)
